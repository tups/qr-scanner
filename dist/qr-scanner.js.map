{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/createClass.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///../node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./qr-scanner.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","module","exports","_arrayWithHoles","isArray","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_iterableToArrayLimit","Symbol","iterator","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","err","_nonIterableRest","arrayWithHoles","require","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_slicedToArray","arrayLikeToArray","_unsupportedIterableToArray","o","minLen","n","toString","call","slice","constructor","name","from","test","QrScanner","video","options","onDecode","canvasSizeOrOnDecodeError","_onDecodeError","canvasSizeOrCalculateScanRegion","_calculateScanRegion","preferredFacingMode","_options","assign","$video","$canvas","document","createElement","_onDecode","_legacyCanvasSize","DEFAULT_CANVAS_SIZE","_preferredFacingMode","_active","_paused","_flashOn","console","warn","_scanRegion","_onPlay","bind","_onLoadedMetaData","_onVisibilityChange","playsInline","muted","disablePictureInPicture","addEventListener","_qrEnginePromise","createQrEngine","WORKER_PATH","formats","window","Promise","resolve","track","srcObject","getVideoTracks","reject","imageCapture","ImageCapture","getPhotoCapabilities","then","result","fillLightMode","includes","error","_setFlash","removeEventListener","stop","_postWorkerMessage","location","protocol","hidden","clearTimeout","_offTimeout","play","facingMode","_getCameraStream","stream","_getFacingMode","_setVideoMirror","e","pause","setTimeout","tracks","getTracks","red","green","blue","useIntegerApproximation","inversionMode","_scanFrame","start","smallestDimension","Math","min","videoWidth","videoHeight","scanRegionSize","round","x","y","width","height","downScaledWidth","downScaledHeight","paused","ended","requestAnimationFrame","readyState","qrEngine","scanImage","errorMessage","message","indexOf","NO_QR_CODE_FOUND","log","exact","constraintsToTry","forEach","constraint","_getMatchingCameraStream","navigator","mediaDevices","getUserMedia","shift","on","hasFlash","applyConstraints","advanced","torch","scaleFactor","style","transform","videoStream","videoTrack","label","enumerateDevices","devices","some","device","kind","imageOrFileOrUrl","scanRegion","canvas","fixedCanvasSize","alsoTryWithoutScanRegion","gotExternalWorker","Worker","promise","all","_loadImage","engine","image","canvasContext","_drawToCanvas","postMessage","type","data","timeout","onMessage","onError","event","imageData","getImageData","scan","scanWidth","scanHeight","multiple","decodeFormats","hasOwnProperty","cmd","rotation","postOrientation","buffer","detect","scanResults","rawValue","workerPath","promiseSupport","BarcodeDetector","getSupportedFormats","supportedFormats","formatNotSupport","format","scanRegionX","scanRegionY","scanRegionWidth","scanRegionHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","imageOrFileOrBlobOrUrl","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","Blob","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad","qrEngineOrQrEnginePromise"],"mappings":"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","file":"qr-scanner.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","export default class QrScanner {\n\n    static DECODE_FORMATS = [\n        'code_128',\n        'code_93',\n        'code_39',\n        'ean_13',\n        '2Of5',\n        'Inter2Of5',\n        'codabar',\n        'qr_code'\n    ];\n\n\n    /* async */\n    static hasCamera() {\n        if (!navigator.mediaDevices) return Promise.resolve(false);\n        // note that enumerateDevices can always be called and does not prompt the user for permission. However, device\n        // labels are only readable if served via https and an active media stream exists or permanent permission is\n        // given. That doesn't matter for us though as we don't require labels.\n        return navigator.mediaDevices.enumerateDevices()\n            .then(devices => devices.some(device => device.kind === 'videoinput'))\n            .catch(() => false);\n    }\n\n    constructor(\n        video,\n        options,\n        onDecode,\n        canvasSizeOrOnDecodeError = this._onDecodeError,\n        canvasSizeOrCalculateScanRegion = this._calculateScanRegion,\n        preferredFacingMode = 'environment'\n    ) {\n\n        this._options = Object.assign({\n            'formats': ['qr_code', 'ean_13', 'code_39']\n        }, options);\n\n        this.$video = video;\n        this.$canvas = document.createElement('canvas');\n        this._onDecode = onDecode;\n        this._legacyCanvasSize = QrScanner.DEFAULT_CANVAS_SIZE;\n        this._preferredFacingMode = preferredFacingMode;\n        this._active = false;\n        this._paused = false;\n        this._flashOn = false;\n\n        if (typeof canvasSizeOrOnDecodeError === 'number') {\n            // legacy function signature where the third argument is the canvas size\n            this._legacyCanvasSize = canvasSizeOrOnDecodeError;\n            console.warn('You\\'re using a deprecated version of the QrScanner constructor which will be removed in '\n                + 'the future');\n        } else {\n            this._onDecodeError = canvasSizeOrOnDecodeError;\n        }\n\n        if (typeof canvasSizeOrCalculateScanRegion === 'number') {\n            // legacy function signature where the fourth argument is the canvas size\n            this._legacyCanvasSize = canvasSizeOrCalculateScanRegion;\n            console.warn('You\\'re using a deprecated version of the QrScanner constructor which will be removed in '\n                + 'the future');\n        } else {\n            this._calculateScanRegion = canvasSizeOrCalculateScanRegion;\n        }\n\n        this._scanRegion = this._calculateScanRegion(video);\n\n        this._onPlay = this._onPlay.bind(this);\n        this._onLoadedMetaData = this._onLoadedMetaData.bind(this);\n        this._onVisibilityChange = this._onVisibilityChange.bind(this);\n\n        // Allow inline playback on iPhone instead of requiring full screen playback,\n        // see https://webkit.org/blog/6784/new-video-policies-for-ios/\n        this.$video.playsInline = true;\n        // Allow play() on iPhone without requiring a user gesture. Should not really be needed as camera stream\n        // includes no audio, but just to be safe.\n        this.$video.muted = true;\n        this.$video.disablePictureInPicture = true;\n        this.$video.addEventListener('play', this._onPlay);\n        this.$video.addEventListener('loadedmetadata', this._onLoadedMetaData);\n        document.addEventListener('visibilitychange', this._onVisibilityChange);\n\n        this._qrEnginePromise = QrScanner.createQrEngine(QrScanner.WORKER_PATH, this._options.formats);\n    }\n\n    /* async */\n    hasFlash() {\n        if (!('ImageCapture' in window)) {\n            return Promise.resolve(false);\n        }\n\n        const track = this.$video.srcObject ? this.$video.srcObject.getVideoTracks()[0] : null;\n        if (!track) {\n            return Promise.reject('Camera not started or not available');\n        }\n\n        const imageCapture = new ImageCapture(track);\n        return imageCapture.getPhotoCapabilities()\n            .then((result) => {\n                return result.fillLightMode.includes('flash');\n            })\n            .catch((error) => {\n                console.warn(error);\n                return false;\n            });\n    }\n\n    isFlashOn() {\n        return this._flashOn;\n    }\n\n    /* async */\n    toggleFlash() {\n        return this._setFlash(!this._flashOn);\n    }\n\n    /* async */\n    turnFlashOff() {\n        return this._setFlash(false);\n    }\n\n    /* async */\n    turnFlashOn() {\n        return this._setFlash(true);\n    }\n\n    destroy() {\n        this.$video.removeEventListener('loadedmetadata', this._onLoadedMetaData);\n        this.$video.removeEventListener('play', this._onPlay);\n        document.removeEventListener('visibilitychange', this._onVisibilityChange);\n\n        this.stop();\n        QrScanner._postWorkerMessage(this._qrEnginePromise, 'close');\n    }\n\n    /* async */\n    start() {\n        if (this._active && !this._paused) {\n            return Promise.resolve();\n        }\n        if (window.location.protocol !== 'https:') {\n            // warn but try starting the camera anyways\n            console.warn('The camera stream is only accessible if the page is transferred via https.');\n        }\n        this._active = true;\n        this._paused = false;\n        if (document.hidden) {\n            // camera will be started as soon as tab is in foreground\n            return Promise.resolve();\n        }\n        clearTimeout(this._offTimeout);\n        this._offTimeout = null;\n        if (this.$video.srcObject) {\n            // camera stream already/still set\n            this.$video.play();\n            return Promise.resolve();\n        }\n\n        let facingMode = this._preferredFacingMode;\n        return this._getCameraStream(facingMode, true)\n            .catch(() => {\n                // We (probably) don't have a camera of the requested facing mode\n                facingMode = facingMode === 'environment' ? 'user' : 'environment';\n                return this._getCameraStream(); // throws if camera is not accessible (e.g. due to not https)\n            })\n            .then(stream => {\n                // Try to determine the facing mode from the stream, otherwise use our guess. Note that the guess is not\n                // always accurate as Safari returns cameras of different facing mode, even for exact constraints.\n                facingMode = this._getFacingMode(stream) || facingMode;\n                this.$video.srcObject = stream;\n                this.$video.play();\n                this._setVideoMirror(facingMode);\n            })\n            .catch(e => {\n                this._active = false;\n                throw e;\n            });\n    }\n\n    stop() {\n        this.pause();\n        this._active = false;\n    }\n\n    pause() {\n        this._paused = true;\n        if (!this._active) {\n            return;\n        }\n        this.$video.pause();\n        if (this._offTimeout) {\n            return;\n        }\n        this._offTimeout = setTimeout(() => {\n            const tracks = this.$video.srcObject ? this.$video.srcObject.getTracks() : [];\n            for (const track of tracks) {\n                track.stop(); //  note that this will also automatically turn the flashlight off\n            }\n            this.$video.srcObject = null;\n            this._offTimeout = null;\n        }, 300);\n    }\n\n    /* async */\n    static scanImage(imageOrFileOrUrl, scanRegion = null, qrEngine = null, canvas = null, fixedCanvasSize = false,\n                     alsoTryWithoutScanRegion = false, options = {}) {\n        const gotExternalWorker = qrEngine instanceof Worker;\n\n        let promise = Promise.all([\n            qrEngine || QrScanner.createQrEngine(),\n            QrScanner._loadImage(imageOrFileOrUrl),\n        ]).then(([engine, image]) => {\n            qrEngine = engine;\n            let canvasContext;\n            [canvas, canvasContext] = this._drawToCanvas(image, scanRegion, canvas, fixedCanvasSize);\n\n            if (qrEngine instanceof Worker) {\n                if (!gotExternalWorker) {\n                    // Enable scanning of inverted color qr codes. Not using _postWorkerMessage as it's async\n                    qrEngine.postMessage({type: 'inversionMode', data: 'both'});\n                }\n                return new Promise((resolve, reject) => {\n                    let timeout, onMessage, onError;\n                    onMessage = event => {\n                        if (event.data.type !== 'qrResult') {\n                            return;\n                        }\n                        qrEngine.removeEventListener('message', onMessage);\n                        qrEngine.removeEventListener('error', onError);\n                        clearTimeout(timeout);\n                        if (event.data.data !== null) {\n                            resolve(event.data.data);\n                        } else {\n                            reject(QrScanner.NO_QR_CODE_FOUND);\n                        }\n                    };\n                    onError = (e) => {\n                        qrEngine.removeEventListener('message', onMessage);\n                        qrEngine.removeEventListener('error', onError);\n                        clearTimeout(timeout);\n                        const errorMessage = !e ? 'Unknown Error' : (e.message || e);\n                        reject('Scanner error: ' + errorMessage);\n                    };\n                    qrEngine.addEventListener('message', onMessage);\n                    qrEngine.addEventListener('error', onError);\n                    timeout = setTimeout(() => onError('timeout'), 10000);\n                    const imageData = canvasContext.getImageData(0, 0, canvas.width, canvas.height);\n                    qrEngine.postMessage({\n                        type: 'decode',\n                        data: imageData,\n                        scan: imageData.getImageData(0, 0, canvas.width, canvas.height).data,\n                        scanWidth: canvas.width,\n                        scanHeight: canvas.height,\n                        multiple: true,\n                        decodeFormats: options.hasOwnProperty('formats') ? options.formats : ['qr_code'],\n                        cmd: 'normal',\n                        rotation: 1,\n                        postOrientation: false,\n                    }, [imageData.data.buffer]);\n                });\n            } else {\n                return new Promise((resolve, reject) => {\n                    const timeout = setTimeout(() => reject('Scanner error: timeout'), 10000);\n                    qrEngine.detect(canvas).then(scanResults => {\n                        if (!scanResults.length) {\n                            reject(QrScanner.NO_QR_CODE_FOUND);\n                        } else {\n                            resolve(scanResults[0].rawValue);\n                        }\n                    }).catch((e) => reject('Scanner error: ' + (e.message || e))).finally(() => clearTimeout(timeout));\n                });\n            }\n        });\n\n        if (scanRegion && alsoTryWithoutScanRegion) {\n            promise = promise.catch(() => QrScanner.scanImage(imageOrFileOrUrl, null, qrEngine, canvas, fixedCanvasSize));\n        }\n\n        promise = promise.finally(() => {\n            if (gotExternalWorker) return;\n            QrScanner._postWorkerMessage(qrEngine, 'close');\n        });\n\n        return promise;\n    }\n\n    setGrayscaleWeights(red, green, blue, useIntegerApproximation = true) {\n        // Note that for the native BarcodeDecoder, this is a no-op. However, the native implementations work also\n        // well with colored qr codes.\n        QrScanner._postWorkerMessage(\n            this._qrEnginePromise,\n            'grayscaleWeights',\n            {red, green, blue, useIntegerApproximation}\n        );\n    }\n\n    setInversionMode(inversionMode) {\n        // Note that for the native BarcodeDecoder, this is a no-op. However, the native implementations scan normal\n        // and inverted qr codes by default\n        QrScanner._postWorkerMessage(this._qrEnginePromise, 'inversionMode', inversionMode);\n    }\n\n    /* async */\n    static createQrEngine(workerPath = QrScanner.WORKER_PATH, formats = ['qr_code']) {\n        let promiseSupport = 'BarcodeDetector' in window ? BarcodeDetector.getSupportedFormats() : Promise.resolve([]);\n\n        promiseSupport.then((supportedFormats) => {\n            let formatNotSupport = [];\n            formats.forEach(function (format) {\n                if (supportedFormats.indexOf(format) === -1) {\n                    formatNotSupport.push(format);\n                }\n            });\n\n            return formatNotSupport.length\n                ? new BarcodeDetector({formats: formats})\n                : new Worker(workerPath)\n        });\n\n\n    }\n\n    _onPlay() {\n        this._scanRegion = this._calculateScanRegion(this.$video);\n        this._scanFrame();\n    }\n\n    _onLoadedMetaData() {\n        this._scanRegion = this._calculateScanRegion(this.$video);\n    }\n\n    _onVisibilityChange() {\n        if (document.hidden) {\n            this.pause();\n        } else if (this._active) {\n            this.start();\n        }\n    }\n\n    _calculateScanRegion(video) {\n        // Default scan region calculation. Note that this can be overwritten in the constructor.\n        const smallestDimension = Math.min(video.videoWidth, video.videoHeight);\n        const scanRegionSize = Math.round(2 / 3 * smallestDimension);\n        return {\n            x: (video.videoWidth - scanRegionSize) / 2,\n            y: (video.videoHeight - scanRegionSize) / 2,\n            width: scanRegionSize,\n            height: scanRegionSize,\n            downScaledWidth: this._legacyCanvasSize,\n            downScaledHeight: this._legacyCanvasSize,\n        };\n    }\n\n    _scanFrame() {\n        if (!this._active || this.$video.paused || this.$video.ended) return false;\n        // using requestAnimationFrame to avoid scanning if tab is in background\n        requestAnimationFrame(() => {\n            if (this.$video.readyState <= 1) {\n                // Skip scans until the video is ready as drawImage() only works correctly on a video with readyState\n                // > 1, see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage#Notes.\n                // This also avoids false positives for videos paused after a successful scan which remains visible on\n                // the canvas until the video is started again and ready.\n                this._scanFrame();\n                return;\n            }\n            this._qrEnginePromise\n                .then((qrEngine) => QrScanner.scanImage(this.$video, this._scanRegion, qrEngine, this.$canvas, this._options))\n                .then(this._onDecode, (error) => {\n                    if (!this._active) return;\n                    const errorMessage = error.message || error;\n                    if (errorMessage.indexOf('service unavailable') !== -1) {\n                        // When the native BarcodeDetector crashed, create a new one\n                        this._qrEnginePromise = QrScanner.createQrEngine();\n                    }\n                    this._onDecodeError(error);\n                })\n                .then(() => this._scanFrame());\n        });\n    }\n\n    _onDecodeError(error) {\n        // default error handler; can be overwritten in the constructor\n        if (error === QrScanner.NO_QR_CODE_FOUND) return;\n        console.log(error);\n    }\n\n    _getCameraStream(facingMode, exact = false) {\n        const constraintsToTry = [{\n            width: {min: 1024}\n        }, {\n            width: {min: 768}\n        }, {}];\n\n        if (facingMode) {\n            if (exact) {\n                facingMode = {exact: facingMode};\n            }\n            constraintsToTry.forEach(constraint => constraint.facingMode = facingMode);\n        }\n        return this._getMatchingCameraStream(constraintsToTry);\n    }\n\n    _getMatchingCameraStream(constraintsToTry) {\n        if (!navigator.mediaDevices || constraintsToTry.length === 0) {\n            return Promise.reject('Camera not found.');\n        }\n        return navigator.mediaDevices.getUserMedia({\n            video: constraintsToTry.shift()\n        }).catch(() => this._getMatchingCameraStream(constraintsToTry));\n    }\n\n    /* async */\n    _setFlash(on) {\n        return this.hasFlash().then((hasFlash) => {\n            if (!hasFlash) return Promise.reject('No flash available');\n            // Note that the video track is guaranteed to exist at this point\n            return this.$video.srcObject.getVideoTracks()[0].applyConstraints({\n                advanced: [{torch: on}],\n            });\n        }).then(() => this._flashOn = on);\n    }\n\n    _setVideoMirror(facingMode) {\n        // in user facing mode mirror the video to make it easier for the user to position the QR code\n        const scaleFactor = facingMode === 'user' ? -1 : 1;\n        this.$video.style.transform = 'scaleX(' + scaleFactor + ')';\n    }\n\n    _getFacingMode(videoStream) {\n        const videoTrack = videoStream.getVideoTracks()[0];\n        if (!videoTrack) return null; // unknown\n        // inspired by https://github.com/JodusNodus/react-qr-reader/blob/master/src/getDeviceId.js#L13\n        return /rear|back|environment/i.test(videoTrack.label)\n            ? 'environment'\n            : /front|user|face/i.test(videoTrack.label)\n                ? 'user'\n                : null; // unknown\n    }\n\n    static _drawToCanvas(image, scanRegion = null, canvas = null, fixedCanvasSize = false) {\n        canvas = canvas || document.createElement('canvas');\n        const scanRegionX = scanRegion && scanRegion.x ? scanRegion.x : 0;\n        const scanRegionY = scanRegion && scanRegion.y ? scanRegion.y : 0;\n        const scanRegionWidth = scanRegion && scanRegion.width ? scanRegion.width : image.width || image.videoWidth;\n        const scanRegionHeight = scanRegion && scanRegion.height ? scanRegion.height : image.height || image.videoHeight;\n        if (!fixedCanvasSize) {\n            canvas.width = scanRegion && scanRegion.downScaledWidth ? scanRegion.downScaledWidth : scanRegionWidth;\n            canvas.height = scanRegion && scanRegion.downScaledHeight ? scanRegion.downScaledHeight : scanRegionHeight;\n        }\n        const context = canvas.getContext('2d', {alpha: false});\n        context.imageSmoothingEnabled = false; // gives less blurry images\n        context.drawImage(\n            image,\n            scanRegionX, scanRegionY, scanRegionWidth, scanRegionHeight,\n            0, 0, canvas.width, canvas.height\n        );\n        return [canvas, context];\n    }\n\n    /* async */\n    static _loadImage(imageOrFileOrBlobOrUrl) {\n        if (imageOrFileOrBlobOrUrl instanceof HTMLCanvasElement || imageOrFileOrBlobOrUrl instanceof HTMLVideoElement\n            || window.ImageBitmap && imageOrFileOrBlobOrUrl instanceof window.ImageBitmap\n            || window.OffscreenCanvas && imageOrFileOrBlobOrUrl instanceof window.OffscreenCanvas) {\n            return Promise.resolve(imageOrFileOrBlobOrUrl);\n        } else if (imageOrFileOrBlobOrUrl instanceof Image) {\n            return QrScanner._awaitImageLoad(imageOrFileOrBlobOrUrl).then(() => imageOrFileOrBlobOrUrl);\n        } else if (imageOrFileOrBlobOrUrl instanceof File || imageOrFileOrBlobOrUrl instanceof Blob\n            || imageOrFileOrBlobOrUrl instanceof URL || typeof (imageOrFileOrBlobOrUrl) === 'string') {\n            const image = new Image();\n            if (imageOrFileOrBlobOrUrl instanceof File || imageOrFileOrBlobOrUrl instanceof Blob) {\n                image.src = URL.createObjectURL(imageOrFileOrBlobOrUrl);\n            } else {\n                image.src = imageOrFileOrBlobOrUrl;\n            }\n            return QrScanner._awaitImageLoad(image).then(() => {\n                if (imageOrFileOrBlobOrUrl instanceof File || imageOrFileOrBlobOrUrl instanceof Blob) {\n                    URL.revokeObjectURL(image.src);\n                }\n                return image;\n            });\n        } else {\n            return Promise.reject('Unsupported image type.');\n        }\n    }\n\n    /* async */\n    static _awaitImageLoad(image) {\n        return new Promise((resolve, reject) => {\n            if (image.complete && image.naturalWidth !== 0) {\n                // already loaded\n                resolve();\n            } else {\n                let onLoad, onError;\n                onLoad = () => {\n                    image.removeEventListener('load', onLoad);\n                    image.removeEventListener('error', onError);\n                    resolve();\n                };\n                onError = () => {\n                    image.removeEventListener('load', onLoad);\n                    image.removeEventListener('error', onError);\n                    reject('Image load error');\n                };\n                image.addEventListener('load', onLoad);\n                image.addEventListener('error', onError);\n            }\n        });\n    }\n\n    /* async */\n    static _postWorkerMessage(qrEngineOrQrEnginePromise, type, data) {\n        return Promise.resolve(qrEngineOrQrEnginePromise).then((qrEngine) => {\n            if (!(qrEngine instanceof Worker)) return;\n            qrEngine.postMessage({type, data});\n        });\n    }\n}\nQrScanner.DEFAULT_CANVAS_SIZE = 400;\nQrScanner.NO_QR_CODE_FOUND = 'No QR code found';\nQrScanner.WORKER_PATH = 'qr-scanner-worker.min.js';\n"],"sourceRoot":""}